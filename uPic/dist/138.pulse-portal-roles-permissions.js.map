{"version":3,"file":"138.pulse-portal-roles-permissions.js","mappings":"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","sources":["webpack://roles-permissions/./src/components/Breadcrumbs.tsx","webpack://roles-permissions/./src/components/HeaderBreadcrumbs.tsx","webpack://roles-permissions/./src/components/Page.tsx","webpack://roles-permissions/./src/sections/role/RoleNewEditForm.tsx","webpack://roles-permissions/../common/event.ts","webpack://roles-permissions/./src/redux/services/users.ts","webpack://roles-permissions/./src/redux/services/resources.ts","webpack://roles-permissions/./src/pages/RoleCreate.tsx","webpack://roles-permissions/./src/redux/services/roles.ts","webpack://roles-permissions/./src/routes/paths.ts"],"sourcesContent":["import { ReactElement } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\n// @mui\nimport {\n  Box,\n  Link,\n  Typography,\n  BreadcrumbsProps,\n  Breadcrumbs as PRUBreadcrumbs,\n} from 'pulse-portal-styleguide';\n\n// ----------------------------------------------------------------------\n\ntype TLink = {\n  href?: string;\n  name: string;\n  icon?: ReactElement;\n};\n\nexport interface Props extends BreadcrumbsProps {\n  links: TLink[];\n  activeLast?: boolean;\n}\n\nexport default function Breadcrumbs({ links, activeLast = false, ...other }: Props) {\n  const currentLink = links[links.length - 1].name;\n\n  const listDefault = links.map((link) => <LinkItem key={link.name} link={link} />);\n\n  const listActiveLast = links.map((link) => (\n    <div key={link.name}>\n      {link.name !== currentLink ? (\n        <LinkItem link={link} />\n      ) : (\n        <Typography\n          variant=\"body2\"\n          sx={{\n            maxWidth: 260,\n            overflow: 'hidden',\n            whiteSpace: 'nowrap',\n            color: 'text.disabled',\n            textOverflow: 'ellipsis',\n          }}\n        >\n          {currentLink}\n        </Typography>\n      )}\n    </div>\n  ));\n\n  return (\n    <PRUBreadcrumbs\n      separator={\n        <Box\n          component=\"span\"\n          sx={{ width: 4, height: 4, borderRadius: '50%', bgcolor: 'text.disabled' }}\n        />\n      }\n      {...other}\n    >\n      {activeLast ? listDefault : listActiveLast}\n    </PRUBreadcrumbs>\n  );\n}\n\n// ----------------------------------------------------------------------\n\ntype LinkItemProps = {\n  link: TLink;\n};\n\nfunction LinkItem({ link }: LinkItemProps) {\n  const { href, name, icon } = link;\n  return (\n    <Link\n      key={name}\n      variant=\"body2\"\n      component={RouterLink}\n      to={href || '#'}\n      sx={{\n        lineHeight: 2,\n        display: 'flex',\n        alignItems: 'center',\n        color: 'text.primary',\n        '& > div': { display: 'inherit' },\n      }}\n    >\n      {icon && <Box sx={{ mr: 1, '& svg': { width: 20, height: 20 } }}>{icon}</Box>}\n      {name}\n    </Link>\n  );\n}\n","import { ReactNode } from 'react';\n// @mui\nimport { Box, Typography, Link } from 'pulse-portal-styleguide';\n//\nimport Breadcrumbs, { Props as BreadcrumbsProps } from './Breadcrumbs';\n\n// ----------------------------------------------------------------------\n\ninterface Props extends BreadcrumbsProps {\n  action?: ReactNode;\n  heading: string;\n  moreLink?: string | string[];\n}\n\nexport default function HeaderBreadcrumbs({\n  links,\n  action,\n  heading,\n  moreLink = '' || [],\n  sx,\n  ...other\n}: Props) {\n  return (\n    <Box sx={{ mb: 5, ...sx }}>\n      <Box sx={{ display: 'flex', alignItems: 'center' }}>\n        <Box sx={{ flexGrow: 1 }}>\n          <Typography variant=\"h4\" gutterBottom>\n            {heading}\n          </Typography>\n          <Breadcrumbs links={links} {...other} />\n        </Box>\n\n        {action && <Box sx={{ flexShrink: 0 }}>{action}</Box>}\n      </Box>\n\n      <Box sx={{ mt: 2 }}>\n        {typeof moreLink === 'string' ? (\n          <Link href={moreLink} target=\"_blank\" rel=\"noopener\" variant=\"body2\">\n            {moreLink}\n          </Link>\n        ) : (\n          moreLink.map((href) => (\n            <Link\n              noWrap\n              key={href}\n              href={href}\n              variant=\"body2\"\n              target=\"_blank\"\n              rel=\"noopener\"\n              sx={{ display: 'table' }}\n            >\n              {href}\n            </Link>\n          ))\n        )}\n      </Box>\n    </Box>\n  );\n}\n","import { Helmet } from 'react-helmet-async';\nimport { forwardRef, ReactNode } from 'react';\n// @mui\nimport { Box, BoxProps } from 'pulse-portal-styleguide';\n\n// ----------------------------------------------------------------------\n\ninterface Props extends BoxProps {\n  children: ReactNode;\n  meta?: ReactNode;\n  title: string;\n}\n\nconst Page = forwardRef<HTMLDivElement, Props>(({ children, title = '', meta, ...other }, ref) => (\n  <>\n    <Helmet>\n      <title>{`${title} | Pulse Portal`}</title>\n      {meta}\n    </Helmet>\n\n    <Box ref={ref} {...other}>\n      {children}\n    </Box>\n  </>\n));\n\nexport default Page;\n","import { yupResolver } from '@hookform/resolvers/yup';\nimport {\n  Button, Card, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Divider, Grid,\n  Slide,\n  LoadingButton,\n  Stack, TextField, Tooltip, Typography\n} from 'pulse-portal-styleguide';\n// @mui\nimport { styled } from 'pulse-portal-styleguide';\nimport { useSnackbar } from 'pulse-portal-styleguide';\nimport { useEffect, useMemo, useState, forwardRef } from 'react';\n// form\nimport { useForm, useFormState } from 'react-hook-form';\nimport { useNavigate } from 'react-router-dom';\nimport * as Yup from 'yup';\nimport { Resource } from '../../@types/resource';\nimport { Permission } from '../../@types/resource';\n// @types\nimport { Role, RoleUpdate } from '../../@types/role';\n// components\nimport { FormProvider, RHFCheckbox, RHFTextField } from 'pulse-portal-styleguide';\n\n// redux\nimport { useDispatch } from '../../redux/store';\n// routes\nimport { PATH_HOME } from '../../routes/paths';\n// import { TransitionProps } from '@mui/material/transitions';\nimport {EVENT} from '../../../../common'\nimport { useUpdateRoleMutation } from '../../redux/services/roles';\nimport { TreeView } from 'pulse-portal-styleguide';\nimport { Iconify } from 'pulse-portal-styleguide';\nimport { TreeItem } from 'pulse-portal-styleguide';\n// ----------------------------------------------------------------------\n\nconst OPERATION_KEY = {\n  ENTRANCE: 'ENTRANCE',\n  VIEW: 'VIEW',\n  CREATE: 'CREATE',\n  EDIT: 'EDIT',\n}\n\nconst OPERATION_RELATION = {\n  [OPERATION_KEY.ENTRANCE]: {\n    OPEN: [OPERATION_KEY.VIEW],\n    CLOSE: [OPERATION_KEY.VIEW, OPERATION_KEY.CREATE, OPERATION_KEY.EDIT]\n  },\n  [OPERATION_KEY.VIEW]: {\n    OPEN: [],\n    CLOSE: [OPERATION_KEY.ENTRANCE, OPERATION_KEY.VIEW, OPERATION_KEY.CREATE, OPERATION_KEY.EDIT]\n  },\n  [OPERATION_KEY.CREATE]: {\n    OPEN: [OPERATION_KEY.VIEW],\n    CLOSE: []\n  },\n  [OPERATION_KEY.EDIT]: {\n    OPEN: [OPERATION_KEY.VIEW],\n    CLOSE: []\n  }\n}\n\nconst editableByRole = (myRoles?: Role[], currentRole?: Role | null) => {\n  if (!currentRole || !myRoles) {\n    return false;\n  }\n  if(myRoles.find(role => role.key === 'PTLS-PP-DX-ADM')) {\n    if (currentRole.key === 'PTLS-PP-DX-OWN' && !myRoles.find(role => role.key === 'PTLS-PP-DX-OWN')) {\n      return false;\n    }\n  }\n  return true;\n}\n\nconst setPermissionField = (permission: Permission) => `${permission.id}$${permission.operation.key}`;\n\nconst getPermission = (permissionField: string) => {\n  if (permissionField.includes('$')) {\n    const arr = permissionField.split('$');\n    return {id: arr[0], operation: {key: arr[1]}} as Permission;\n  }\n  return null;\n};\n\nconst LabelStyle = styled(Typography)(({ theme }) => ({\n  ...theme.typography.subtitle2,\n  color: theme.palette.text.secondary,\n  marginBottom: theme.spacing(1),\n}));\n\nconst SwitchLabelStyle = styled(Typography)(({ theme }) => ({\n  ...theme.typography.h6,\n  color: theme.palette.text.disabled,\n}));\n\nconst Transition = forwardRef(function Transition(\n  props: any & {\n    children: React.ReactElement<any, any>;\n  },\n  ref: React.Ref<unknown>,\n) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nconst dispatchRoleChangedEvent = (roleUpdate: RoleUpdate) => {\n  const event = new CustomEvent(EVENT.DISPATCH_ROLE_CHANGED, { detail: {\n    roleUpdate\n  }});\n  window.dispatchEvent(event);\n}\n\nconst renderTree = (resource: Resource) => (\n  <TreeItem key={resource.id} nodeId={resource.id} label={resource.name}>\n    <Stack direction=\"row\" spacing={3}>\n    {resource.permissions?.map(permission => \n      <Stack key={permission.id}><RHFCheckbox name={`permissions.${resource.key}.${setPermissionField(permission)}`} label={permission.operation?.name || ''} /></Stack>\n    )}\n    </Stack>\n    {Array.isArray(resource.children)\n      ? resource.children.map((node) => renderTree(node))\n      : null}\n  </TreeItem>\n);\n\nconst treeFindParents = (resources: Resource[], checkedKey: string) => {\n  const treeFindPath = (tree: Resource[], checkedKey: string, path: Resource[] = []) : Resource[] => {\n    if (!tree) return [];\n    for (const data of tree) {\n      if (checkedKey === data.key) return path;\n      path.push(data);\n      if (data.children) {\n        const findChildren = treeFindPath(data.children, checkedKey, path);\n        if (findChildren.length) return findChildren;\n      }\n      path.pop();\n    }\n    return [];\n  }\n  const findParents = treeFindPath(resources, checkedKey);\n  return findParents;\n};\n\nconst treeFindChildren = (resources: Resource[], checkedKey: string) => {\n  const findNode = (tree: Resource[], checkedKey: string) : Resource | null => {\n    for (const data of tree) {\n      if (checkedKey === data.key) return data;\n      if (data.children) {\n        const res = findNode(data.children, checkedKey);\n        if (res) return res;\n      }\n    }\n    return null;\n  }\n  const node = findNode(resources, checkedKey);\n\n  if (!node || !node?.children) return [];\n\n  const findChildren = (tree: Resource[], checkedKey: string, path: Resource[] = []) => {\n    tree.forEach(data => {\n      data.children && findChildren(data.children, checkedKey, path);\n      path.push(data);\n    })\n    return path;\n  }\n\n  const children = findChildren(node.children, checkedKey);\n  return children;\n};\n\n// ----------------------------------------------------------------------\n\ninterface FormValuesProps extends Partial<RoleUpdate> {\n  permissions: {\n    [key: string]: {\n      [key: string]: boolean;\n    };\n  };\n}\n\ntype Props = {\n  isEdit: boolean;\n  currentRole?: Role | null;\n  myRoles?: Role[];\n  resources: Resource[];\n  appName: string;\n  onCancel: () => void;\n};\n\nexport default function RoleNewEditForm({ isEdit, currentRole, myRoles, resources, appName, onCancel }: Props) {\n  const navigate = useNavigate();\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [dialogOpen, setDialogOpen] = useState(false);\n\n  const dispatch = useDispatch();\n\n  const NewRoleSchema = Yup.object().shape({\n    name: Yup.string().required('Role Name is required').max(100, 'Must not exceed 100 characters'),\n    description: Yup.string().max(200, 'Must not exceed 200 characters'),\n  });\n\n  const defaultValues = useMemo(\n    () => {\n      const permissions: any = {};\n      // default value\n      const loopResources = (items: Resource[]) => items?.forEach(resource => {\n        permissions[resource.key] = {\n          // [OPERATION_KEY.ENTRANCE]: false\n        };\n        resource.permissions.forEach(permission => {\n          permissions[resource.key][setPermissionField(permission)] = false;\n        })\n        if (resource.children) {\n          loopResources(resource.children);\n        }\n      });\n      loopResources(resources);\n      // current value\n      currentRole?.permissions.forEach(permission => {\n        if (!permissions[permission.resource.key]) {\n          permissions[permission.resource.key] = {};\n        }\n        // permissions[permission.resource.key][OPERATION_KEY.ENTRANCE] = true;\n        permissions[permission.resource.key][setPermissionField(permission)] = true;\n      });\n\n      return {\n        name: currentRole?.name || '',\n        id: currentRole?.id || '',\n        description: currentRole?.description || '',\n        permissions,\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [currentRole]\n  );\n\n  const methods = useForm<FormValuesProps>({\n    resolver: yupResolver(NewRoleSchema),\n    defaultValues,\n  });\n\n  const {\n    reset,\n    watch,\n    control,\n    setValue,\n    getValues,\n    handleSubmit,\n    formState: { isSubmitting },\n  } = methods;\n\n  const { isDirty } = useFormState({\n    control\n  });\n  const values = watch();\n\n  useEffect(() => {\n    const subscription = watch((value, { name, type }) => {\n      if (name?.startsWith('permissions') && type === 'change') {\n        const arr = name.split('.')\n        if (arr.length === 3) {\n          const consoler = arr[1];\n          const mainKey = arr[2];\n          if (value.permissions?.[consoler]) {\n            const checked = !!getValues(name);\n            OPERATION_RELATION[Object.keys(OPERATION_RELATION).find(key => mainKey.includes(key))!][checked ? 'OPEN' : 'CLOSE'].forEach(relationKey => {\n              Object.keys(value.permissions?.[consoler]!).forEach(key => {\n                if (key.includes(relationKey)) {\n                  setValue(`permissions.${consoler}.${key}`, checked);\n                }\n              });\n            });\n\n            let relatedNodes: Resource[] = [];\n            if (checked) {\n              const parents = treeFindParents(resources, consoler);\n              console.log(parents)\n              relatedNodes.push(...parents);\n            }\n            const children = treeFindChildren(resources, consoler);\n            console.log(children)\n            relatedNodes.push(...children);\n            relatedNodes.forEach(parent => {\n              Object.keys(value.permissions?.[parent.key]!).forEach(key => {\n                const operation = getPermission(mainKey)?.operation.key;\n                if (operation && key.includes(operation)) {\n                  setValue(`permissions.${parent.key}.${key}`, checked);\n                }\n              });\n            })\n          }\n        }\n      }\n    });\n    return () => subscription.unsubscribe();\n  }, [watch]);\n\n  useEffect(() => {\n    if (isEdit && currentRole) {\n      reset(defaultValues);\n    }\n    if (!isEdit) {\n      reset(defaultValues);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isEdit, currentRole]);\n\n  const [updateRole, { isLoading: isUpdating }] = useUpdateRoleMutation()\n\n  const onSubmit = async (data: FormValuesProps) => {\n    const permissionIds: string[] = [];\n    Object.keys(data.permissions).forEach(console => {\n      Object.keys(data.permissions[console]).forEach(key => data.permissions[console][key] && getPermission(key) && permissionIds.push(getPermission(key)!.id));\n    });\n    const params = {id: data.id!, name: data.name!, description: data.description!, permissionIds};\n    try {\n      await updateRole(params).unwrap();\n      reset(data);\n      dispatchRoleChangedEvent(params);\n      enqueueSnackbar(!isEdit ? 'Role created successfully!' : 'Changes saved successfully!');\n      navigate(PATH_HOME.role.root(appName));\n    } catch (error) {\n      enqueueSnackbar(!isEdit ? 'Failed to create, please try again.' : 'Failed to save, please try again.', {variant: 'error'});\n      console.error(error);\n    }\n  };\n\n  return (\n    <FormProvider methods={methods} onSubmit={handleSubmit(onSubmit)}>\n      <Grid container direction=\"row\" justifyContent=\"flex-end\" spacing={3} sx={{ pb: 5, pt: 5 }}>\n        <Stack direction=\"row\" spacing={1}>\n          <Button variant=\"outlined\" color=\"inherit\" onClick={() => isDirty ? setDialogOpen(true) : onCancel()}>\n            Back\n          </Button>\n          {isDirty && <LoadingButton type=\"submit\" variant=\"contained\" loading={isSubmitting}>\n            {isEdit ? 'Save Changes' : 'Save'}\n          </LoadingButton>}\n        </Stack>\n      </Grid>\n        \n      <Grid container spacing={3}>\n\n        <Grid item xs={12} md={4}>\n          <Card sx={{ p: 3 }}>\n            <Stack spacing={3}>\n              <LabelStyle>Role Information</LabelStyle>\n\n              <RHFTextField name=\"name\" label=\"Role Name\" />\n\n              <Tooltip title={getValues('id') || ''}>\n                <TextField name=\"id\" label=\"Role ID\" value={getValues('id')} disabled fullWidth />\n              </Tooltip>\n              \n              <RHFTextField name=\"description\" label=\"Description\" multiline minRows={6} />\n            </Stack>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} md={8}>\n          <Card sx={{ p: 3 }}>\n            <Stack spacing={3}>\n              <LabelStyle>Permissions</LabelStyle>\n              <Stack spacing={3} divider={<Divider sx={{ borderStyle: 'dashed' }} />}>\n              {resources?.map((resource, index) => \n                <Stack key={resource.id} spacing={3}>\n                  <Grid container direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\n                    <SwitchLabelStyle>{resource.name}</SwitchLabelStyle>\n                    {/* <RHFSwitch name={`permissions.${resource.key}.${OPERATION_KEY.ENTRANCE}`} label=\"\" /> */}\n                  </Grid>\n                  <Stack direction=\"row\" spacing={3}>\n                  {resource.key === 'TREE' ? \n                      <TreeView\n                        aria-label=\"icon expansion\"\n                        defaultCollapseIcon={<Iconify icon={'eva:arrow-ios-downward-fill'} sx={{ ml: 0.5, width: 16, height: 16 }} />}\n                        defaultExpandIcon={<Iconify icon={'eva:arrow-ios-forward-fill'} sx={{ ml: 0.5, width: 16, height: 16 }} />}\n                        defaultExpanded={currentRole?.permissions.map(p => p.resource.id) || []}\n                      >\n                        {Array.isArray(resource.children) ? resource.children.map((node: any) => renderTree(node)) : null}\n                      </TreeView> :\n                      resource.permissions?.map(permission => \n                        <Stack key={permission.id}><RHFCheckbox name={`permissions.${resource.key}.${setPermissionField(permission)}`} label={permission.operation?.name || ''} disabled={resource.key === 'ROLE_PERMISSION' || !editableByRole(myRoles, currentRole)} /></Stack>\n                      )\n                    }\n                  </Stack>\n                </Stack>\n              )}\n              </Stack>\n            </Stack>\n          </Card>\n        </Grid>\n\n      </Grid>\n\n      <Dialog\n        open={dialogOpen}\n        TransitionComponent={Transition}\n        keepMounted\n        onClose={() => setDialogOpen(false)}\n        aria-describedby=\"alert-dialog-slide-description\"\n      >\n        <DialogTitle>Unsaved Changes</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-slide-description\">\n          You have made changes on this page. Do you want to discard changes or continue to edit?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"outlined\" color=\"inherit\" onClick={onCancel}>Discard</Button>\n          <Button variant=\"contained\" onClick={() => setDialogOpen(false)}>Continue Editing</Button>\n        </DialogActions>\n      </Dialog>\n    </FormProvider>\n  );\n}\n","export const EVENT = {\n  DISPATCH_CURRENT_ACCOUNT: 'dispatchCurrentAccount',\n  DISPATCH_ROLE_CHANGED: 'dispatchRoleChanged',\n}","import { Role } from 'src/@types/role'\nimport { api } from './api'\n\nexport const usersApi = api.injectEndpoints({\n  endpoints: (build) => ({\n    getUserRoles: build.query<Role[], string>({\n      query: (id) => `/users/${id}/roles`,\n      providesTags: (_role, _err, id) => [{ type: 'Users', id }],\n    }),\n  }),\n})\n\nexport const {\n  useGetUserRolesQuery,\n} = usersApi\n","import { Resource } from 'src/@types/resource'\nimport { api } from './api'\n\nexport const resourcesApi = api.injectEndpoints({\n  endpoints: (build) => ({\n    getResources: build.query<Resource[], void>({\n      query: () => `/resources`,\n      providesTags: ['Resources'],\n    }),\n  }),\n})\n\nexport const {\n  useGetResourcesQuery,\n} = resourcesApi\n","// @mui\nimport { Box, Card, Container, Grid, Skeleton, Stack } from 'pulse-portal-styleguide';\nimport { useEffect } from 'react';\nimport { useLocation, useParams } from 'react-router-dom';\nimport HeaderBreadcrumbs from '../components/HeaderBreadcrumbs';\n// import { HeaderBreadcrumbs } from 'pulse-portal-styleguide';\n// components\nimport Page from '../components/Page';\n// redux\nimport { useDispatch, useSelector } from '../redux/store';\n// routes\nimport { PATH_HOME } from '../routes/paths';\n// sections\nimport RoleNewEditForm from '../sections/role/RoleNewEditForm';\n\nimport { useNavigate } from 'react-router-dom';\nimport { useGetRoleQuery } from '../redux/services/roles';\nimport { useGetUserRolesQuery } from '../redux/services/users';\nimport { useGetResourcesQuery } from '../redux/services/resources';\n\n// ----------------------------------------------------------------------\n\nexport default function RoleCreate() {\n\n  const navigate = useNavigate();\n\n  const { appName } = useSelector((state) => state.main);\n\n  const dispatch = useDispatch();\n\n  const { pathname } = useLocation();\n\n  const { id = '' } = useParams();\n\n  const isEdit = pathname.includes('edit');\n\n  const { data: role, isLoading } = useGetRoleQuery(id);\n  const { data: myRoles, isLoading: isLoadingUser } = useGetUserRolesQuery('me');\n  const { data: resources, isLoading: isLoadingResources } = useGetResourcesQuery();\n\n  const handleCancel = () => {\n    navigate(PATH_HOME.role.root(appName));\n  };\n\n  return (\n    <Page title=\"Home: Roles & Permissions: Role\">\n      <Container maxWidth={'lg'}>\n        <HeaderBreadcrumbs\n          heading={!isEdit ? 'Create a new Role' : role?.name || 'Role'}\n          links={[\n            { name: 'Home', href: PATH_HOME.root },\n            {\n              name: 'Roles & Permissions Management',\n              href: PATH_HOME.role.root(appName),\n            },\n            { name: !isEdit ? 'New role' : role?.name || 'Role' },\n          ]}\n        />\n        {(isLoading || isLoadingUser || isLoadingResources) ? \n        <Box>\n          <Grid container direction=\"row\" justifyContent=\"flex-end\" spacing={3} sx={{ pb: 5, pt: 5 }}>\n            <Stack direction=\"row\" spacing={1}>\n              <Skeleton variant=\"text\" width={100} height={36} />\n            </Stack>\n          </Grid>\n          <Grid container spacing={3}>\n            <Grid item xs={12} md={4}>\n              <Card sx={{ p: 3 }}>\n                <Stack spacing={3}>\n                  <Skeleton variant=\"text\" width=\"100%\" height={56} />\n                  <Skeleton variant=\"text\" width=\"100%\" height={56} />\n                  <Skeleton variant=\"text\" width=\"100%\" height={56} />\n                </Stack>\n              </Card>\n            </Grid>\n            <Grid item xs={12} md={8}>\n              <Card sx={{ p: 3 }}>\n                <Stack spacing={3}>\n                  <Stack spacing={3}>\n                    <Skeleton variant=\"text\" width=\"100%\" height={56} />\n                    <Skeleton variant=\"text\" width=\"100%\" height={56} />\n                    <Skeleton variant=\"text\" width=\"100%\" height={56} />\n                    <Skeleton variant=\"text\" width=\"100%\" height={56} />\n                  </Stack>\n                </Stack>\n              </Card>\n            </Grid>\n          </Grid>\n        </Box>\n        :\n        <RoleNewEditForm isEdit={isEdit} currentRole={role} myRoles={myRoles} resources={resources!} appName={appName} onCancel={handleCancel} />}\n      </Container>\n    </Page>\n  );\n}\n","import { Role } from 'src/@types/role'\nimport { api } from './api'\n\ntype RolesResponse = {\n  records: Role[],\n  paging: {pageIndex: number, itemsPerPage: number, total: number, pages: number};\n}\n\nexport const rolesApi = api.injectEndpoints({\n  endpoints: (build) => ({\n    getRoles: build.query<RolesResponse, { page: number, rowsPerPage: number }>({\n      query: ({page, rowsPerPage}) => ({\n        url: `roles`,\n        method: 'GET',\n        params: {\n          pageIndex: page + 1,\n          itemsPerPage: rowsPerPage,\n        },\n      }),\n      providesTags: (result) =>\n        result ? result.records.map(({ id }) => ({ type: 'Roles', id })) : ['Roles'],\n    }),\n    addRole: build.mutation<Role, Partial<Role>>({\n      query: (body) => ({\n        url: `roles`,\n        method: 'POST',\n        body,\n      }),\n      invalidatesTags: [{ type: 'Roles', id: 'LIST' }],\n    }),\n    getRole: build.query<Role, string>({\n      query: (id) => `roles/${id}`,\n      providesTags: (_role, _err, id) => [{ type: 'Roles', id }],\n    }),\n    updateRole: build.mutation<Role, Partial<Role>>({\n      query: (data) => {\n        const { id, ...body } = data\n        return {\n          url: `roles/${id}`,\n          method: 'PUT',\n          body,\n        }\n      },\n      invalidatesTags: (role) => [{ type: 'Roles', id: role?.id }],\n    }),\n    deleteRole: build.mutation<{ success: boolean; id: number }, number>({\n      query(id) {\n        return {\n          url: `posts/${id}`,\n          method: 'DELETE',\n        }\n      },\n      invalidatesTags: (role) => [{ type: 'Roles', id: role?.id }],\n    }),\n  }),\n})\n\nexport const {\n  useGetRoleQuery,\n  useGetRolesQuery,\n  useUpdateRoleMutation,\n} = rolesApi\n","// ----------------------------------------------------------------------\n\nfunction path(appName: string, sublink: string) {\n  return `/${appName}${sublink}`;\n}\n\n// ----------------------------------------------------------------------\n\nexport const PATH_HOME = {\n  root: '/',\n  role: {\n    root: (appName:string) => path(appName, '/list'),\n    edit: (appName:string, name: string) => path(appName, `/list/${name}/edit`),\n  },\n};"],"names":["Breadcrumbs","links","activeLast","other","currentLink","length","name","listDefault","map","link","LinkItem","listActiveLast","Typography","variant","sx","maxWidth","overflow","whiteSpace","color","textOverflow","separator","Box","component","width","height","borderRadius","bgcolor","href","icon","Link","RouterLink","to","lineHeight","display","alignItems","mr","HeaderBreadcrumbs","action","heading","moreLink","mb","flexGrow","gutterBottom","flexShrink","mt","target","rel","noWrap","Page","forwardRef","ref","children","title","meta","i","OPERATION_KEY","OPERATION_RELATION","OPEN","CLOSE","editableByRole","myRoles","currentRole","find","role","key","setPermissionField","permission","id","operation","getPermission","permissionField","includes","arr","split","LabelStyle","styled","theme","typography","subtitle2","palette","text","secondary","marginBottom","spacing","SwitchLabelStyle","h6","disabled","Transition","props","Slide","direction","renderTree","resource","TreeItem","nodeId","label","Stack","permissions","RHFCheckbox","Array","isArray","node","RoleNewEditForm","isEdit","resources","appName","onCancel","navigate","useNavigate","enqueueSnackbar","useSnackbar","useState","dialogOpen","setDialogOpen","NewRoleSchema","useDispatch","Yup","shape","required","max","description","defaultValues","useMemo","loopResources","items","forEach","methods","useForm","resolver","yupResolver","reset","watch","control","setValue","getValues","handleSubmit","isSubmitting","formState","isDirty","useFormState","useEffect","subscription","value","type","startsWith","consoler","mainKey","checked","Object","keys","relationKey","relatedNodes","parents","checkedKey","findParents","treeFindPath","tree","path","data","push","findChildren","pop","treeFindParents","console","log","findNode","res","treeFindChildren","parent","unsubscribe","useUpdateRoleMutation","updateRole","onSubmit","isLoading","permissionIds","params","unwrap","event","CustomEvent","detail","roleUpdate","window","dispatchEvent","PATH_HOME","error","FormProvider","Grid","container","justifyContent","pb","pt","Button","onClick","LoadingButton","loading","item","xs","md","Card","p","RHFTextField","Tooltip","TextField","fullWidth","multiline","minRows","divider","Divider","borderStyle","index","TreeView","defaultCollapseIcon","Iconify","ml","defaultExpandIcon","defaultExpanded","Dialog","open","TransitionComponent","keepMounted","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","useGetUserRolesQuery","api","endpoints","build","getUserRoles","query","providesTags","_role","_err","useGetResourcesQuery","getResources","RoleCreate","useSelector","state","main","pathname","useLocation","useParams","useGetRoleQuery","isLoadingUser","isLoadingResources","Container","Skeleton","rolesApi","getRoles","url","method","pageIndex","page","itemsPerPage","rowsPerPage","result","records","addRole","mutation","body","invalidatesTags","getRole","deleteRole","useGetRolesQuery","sublink","root","edit"],"sourceRoot":""}